# act-runner-controller values
#
# This chart provides KEDA-based autoscaling configuration for act_runner
# scale sets. It creates a TriggerAuthentication resource and an optional
# Secret for the Forgejo/Gitea API token. The actual ScaledObject is
# created by the act-runner-scale-set chart when keda.enabled=true.
#
# PREREQUISITE: KEDA must be installed in your cluster.
#   See https://keda.sh/docs/latest/deploy/

# -- Override the chart name
nameOverride: ""
# -- Override the full release name
fullnameOverride: ""

# -- Additional labels to add to all resources
additionalLabels: {}

# -- Additional annotations to add to all resources
additionalAnnotations: {}

# Forgejo / Gitea instance configuration
forgejo:
  # -- (required) Forgejo/Gitea instance URL (e.g. https://forgejo.example.com)
  url: ""

  # -- API token with permissions to read action jobs.
  #    Admin scope: needs admin API access (reads /api/v1/admin/actions/jobs)
  #    Org scope: needs org-level access (reads /api/v1/orgs/{org}/actions/jobs)
  #    If set (and apiTokenSecret.name is empty), the chart creates a Secret.
  apiToken: ""

  # -- Reference a pre-existing Secret instead of creating one.
  apiTokenSecret:
    # -- Name of the pre-existing Secret
    name: ""
    # -- Key inside the Secret that holds the API token
    key: "token"

  # -- API scope: "admin" or "org"
  #    admin: uses /api/v1/admin/actions/jobs (requires admin privileges)
  #    org:   uses /api/v1/orgs/{org}/actions/jobs (requires org-level access)
  scope: "admin"

  # -- Organization name (only used when scope=org)
  org: ""

# KEDA TriggerAuthentication configuration
triggerAuthentication:
  # -- Create a KEDA TriggerAuthentication resource
  create: true
  # -- Name override for the TriggerAuthentication
  name: ""
